## 做人脸识别的历程包括大学一年半 我的想法

这个人脸识别项目开始的原因只是加入实验室时接到的一个项目，来给实验室做签到系统，或者说是投名状，因为我当时确实很想加入这个实验室，舒服的学习环境

当然这里面有个有意思的东西，我是一个过程导向的人，我不喜欢以极快的方式完成一个项目，我喜欢慢慢打磨一个东西，但是我肚子里面没有东西，我是肯定写不出这么一个东西，所以我最开始做这么一个东西的时候非常痛苦，那种对于未知的陌生感是非常难受的，我举个最简单的例子，项目最开始的时候我连git都使用的非常少，或者说基本的命令都在看教程弄，包括linux的命令，最难受的是，刚开始的时候我才刚刚开始使用arch，我对我的电脑开始了感觉到极度陌生

当然这个情况在现在是完全不存在了，半年不间断使用让熟练度提高很多，最爽的一点可能是：我经常想到如果有这个功能的话应该会很爽，然后当我去问ai，ai马上就能说这个功能直接用git的什么什么就ok了，完全覆盖了我的需求，只能说，程序员对于自己要使用的工具一点都不吝啬啊

说回来，还是很喜欢这个项目的，这个项目让我以极快的速度熟悉了arch或者说linux，然后就是git，讲真的，如果我最开始接触到的是JetBrains的产品，我可能会对命令行编程有很大的抵触，就像是如果先去学go这种现代的语言，我再自己去写map，slice这些功能，再重复造乱七八糟的轮子的时候，我可能会非常排斥了解这个底层是怎么实现的，觉得没必要，我只会去记住这个要按哪个按键，例如说，在go里面传递是形参，复制的是这个切片的头指针，len和cap，本质上这个这是指向了底层的一块内存，append去扩容的时候如果溢出了，go直接去换一块的内存，如果没了解底层一点操作，那我最多只能去记住什么什么操作，报错根本看不懂，或许这也是值得庆幸的点

说起底层的这c语言，倒是由此又想起来最开始的情况，正好我来讲讲我大学一年半的主要经历吧，最开始学c语言的时候根本不了解什么是编译器，那段时间使用devc++,编译运行只是两个按钮，我只知道按下就能弹出我想要的东西，后来因为觉得vscode更加高级，或者说确实觉得vscode更好用，毕竟devc++连最基本的tab补充都是没有的，那这个就带来一个很有意思的问题，mingw64-gcc因为国内网络问题，下载是极慢的，我那时只是一个萌新，翻墙对于我来说是一个很麻烦的问题，导致开始非常的困难，那时还搜了一些教程，评论区清一色在嘲讽，连翻墙也不会就不要学计算机了，这个我现在想起来也觉得想笑，唉。。。可能是我找的平台的问题吧，对新手的包容度还是太差了，当然最后起码解决了，我去devc++那里偷了一份mingw64-gcc

当然有人会问我为什么不去用微软自家的ide，首要原因可能是微软那个编译器有很多我当时不理解的安全措施，比如将scanf认为是不安全的，需要使用scanf_s，第二个原因可能是我那段时间就已经在思考去找个安静的地方学习了，我们宿舍纯纯是个电竞宿舍，指望在宿舍学习那基本等于做梦，但是我的电脑那么重，加之游戏本用的话起码要去找个地方插电源吧，所以我当时只有两个方向，一个是找个合适的地方，另一个买个合适的轻薄本，当然最后的决定是买了mac，但是微软这个ide在24年8月就停止支持mac了，双平台来回切换的话就没再去考虑这个ide了

其余的原因可能就是，我开始详细了解编译器这个东西的是因为这个视频[https://youtu.be/XJC5WB2Bwrc?si=QAvYTUMWy0pNUbPX](https://youtu.be/XJC5WB2Bwrc?si=QAvYTUMWy0pNUbPX),之前只不过是为了给自己创造一个更舒服的编码体验，压根不理解编译到底是指什么

印象里干完这些事情，我就开启大一上的期末了，印象里面我c最开始的概念打了不错的基础，很投入地了解了指针，包括指针扩展出来的简单的算法，很让我着迷，或许这就是更严格意义上的梦的开始吧

大一寒假的时候可能是毫无意义的躺平像温水煮青蛙，一个寒假一点没学，每天刷毫无意义的短视频，大一下，这个学期有很多原因，最表层的是我花了大量时间与金钱在打麻将这种娱乐活动上，往深想可能是当时焦虑又闭门造车，c语言深入的东西都没有学到，导致这个学期非常浑浑噩噩，不至于什么东西都没有学到吧，但是绝对没达到我想象中能学到的多，确实对这部分浪费的时间感到很可惜，这个学期最爽的时间点可能是大一最后的小学期，那段时间很认真地写了这个大作业，没怎么使用过ai的大脑就像是未经污染的小孩子的大脑一样值得珍惜，完整写完这个项目确实让我对所有的基础一点或者说，大一能接触到的大部分的东西好好完善了一下，把欠的技术债还了，也有可能是颓废一个学期了，结尾实在受不了了，当然这个学期学到的其实也不算少，[https://www.hello-algo.com/](https://www.hello-algo.com/)，这个网站是郑推荐的一个网站，基本的里面大部分靠c直接用到的，我都学到了

也算是借着这个劲头吧，假期将前端好好看了看，也是在这个时间点了解的go，这个语言的广为人知的特点都卡在我喜欢的点上了，严格的写法，规整的思路，不用像java那样笨重，大小项目都能接得住，再回来的时候算是回到我们最开始的话题了基本

暑假一来，首先迎来的是实训，讲真的，这是我大学一年半最爽的一个月，哪怕每天要早起上早八中午要两点起，挤在小小的教室里面抢插口给电脑插电，周围吵吵闹闹，但是你现在问我，我依旧会告诉你说我那段时间学习的感觉很爽，也是在这个时间段吧，熟悉了郑，靠着郑不错的知识储备成功入手arch和git，包括一个极大改善了我未来两年的学习环境的决定，加入到他在的这个网安实验室。

要说实训干了什么，我可能只能想到的是我们安装arch的过程，这个系统较为硬核，如果你要使用命令行安装那是极其硬核的，你需要手动一点一点安装东西，比如说类似于引导，内核，桌面，所有软件，一切都需要去自己自定义，刚开始对于我这么一个不怎么了解linux的人来说，太难了，举步维艰，当然多亏了有郑，还有arch推出的这个archinstall脚本(我们下载的这个archlinux-2025.07.01-x86_64里面的archinstall是没有很美观的界面，当时还只是一个朴素的tui界面)，因为这个东西我们第一次安装其实相对于命令行安装没有花费那么多脑细胞，至于为什么安装还是花费了将近一周的时间可能是我基本没有使用过linux，没有使用过多少命令行，没有接触过系统的引导，没有了解过linux的分区与结构，也没有了解过内核与驱动，熟悉这些确实花了不少时间

因为arch用户或者说arch非常推崇命令行操作，所以说git靠命令行操作或者说学习绝对是最舒服的，这次安装完我用了将近两个月，期间没重装过系统，我这么说两个月你可能觉得没什么，但是我这个人电脑洁癖非常严重，在我使用windows的时候，因为windows删东西特麻烦，无敌麻烦，时不时碰到权限不足的问题，我到现在无法理解为什么有些软件我提到最高的权限都无法删除，但是拿这个软件的删除工具就能移走，应用的权限比我这个用户和管理员的权限还高。。。导致我一旦遇到恶心的东西，我直接就会去重装我的windows，我重装windows的频率特别频繁，基本隔几天就想重装一下

那段时间，基本每天就是在乱七八糟的看一看，因为arch或者说linux对于我来说太稀奇，就相当于一个你早有耳闻但从来没接触过的一个人突然出现在你身边，我随便看看基本就能花掉一下午的时间

再接下来就是去实验室的经历了，这部分我就不在这里说了，快进一下，基本就是到了开始做这个项目的时间了，就像是我最开始所说的那样，开始那段时间比较痛苦，最开始的时间只能不断向chatgpt发送我的需求，就像是个深闺怨妇一样一直在与一个ai做这么一个东西，我觉得ai去做老师去做工具去做下手是很不错，但是做乙方那是真恶心，不过ai确实去帮一个零基础的人完成一份较大的工程还是太难了，所以就把这个项目拆分了一下，人脸识别签到一来需要去识别，二来要有可视化，最开始是准备一口气全做下，当然步子太大了，别说档了，人都快劈开了。。。那没办法啊，项目总要做的啊，但是前面已经花掉半个多月时间了，我这个人可能比较掘吧，死磕半个月才放弃，然后就开始分开这个项目，第一部分，获得视频流，再截获视频流里面的关键照片，第二部分，将人脸照片交给识别模型这个模块，第三部分，识别结果写入到日志里面，第四部分，web模块后端去解析这个日志，统计

当然，光分成这样远远不够，先说第一部分和第二部分吧，郑帮我用ai最开始找到的那个模型，测试开始的时候只能认识一张脸，我最开始认为是模型的问题，识别精度的问题，但是后来发现不是，是opencv的问题或者说底层在给到识别模型的帧有延迟问题的，就是你可以将视频流理解为一个单向小通道，每识别一次脸，那这段视频流里面积累了大量的该人脸，一张接着一张一模一样的，当下一个人来的时候，也堆在这里，但是没有下下个人来识别前，第二个人的人脸被堆在这个通道，直到下一个人的人脸将第二个人脸推到前面，说实话我到现在也没有完全了解这个问题，也有可能是是当时基于树莓派的性能不够的问题，出现积压的问题，也有可能是当时摄像头的问题，这个倒是过于复杂，不是我这个菜鸡能理解的了。。

但是了解这个原因是有代价，代价是什么呢？我开始以为是模型精度的时候，我直接就去找新的模型了，但是这两个部分都是围绕模型展开的，核心换了，那接口什么都变了，那没办法啊，平推了从头开始

但是下一个模型还是有同样的问题，到这个时候我其实有怀疑是开源的东西做的没那么好，但是我又觉得不对，毕竟这个模型是有着7k多的星标，怎么可能有这么多傻子能给一个坏项目加星标呢，所以我会去找问题(这段时间我向ai发的脏话比我这辈子嘴里面说的都要多)，也是在这个时间我初步完善 第三部分--日志规则 的，之前一直是随着ai的日志来，反正最后是ai看，但是现在是我要看了，然后我大规模规范，包括加入了照片落盘，当我去看的时候发现照片确实与人名每秒都能对上，然后原因就得出来了，底层给到的照片有问题

但是我最后采取的处理办法有点暴力，直接丢帧，检测到两个帧一样就把这个队列丢弃，然后重新获得，以及将这个ffmpeg的堆积卡一下，但是这些主意是ai的，这个确实需要处理视频流的经验

但是这个模型确实出了问题，识别确实出现了精度问题(现在来看好像是我那个小摄像头的问题，像素低)，接下来换到的还是郑找到的下一个模型[https://github.com/deepinsight/insightface](https://github.com/deepinsight/insightface)，而且这个模型可以直接靠pip下载，而且python直接去调用这个暴露的接口，换到这个项目的时候项目需要写的代码被爆砍，爆砍，我当时觉得python真tm伟大，当然不可不佩服郑，这个确实是他个人的一个魅力，不知道从哪掏出来个宝藏，当然光这一个事件我还不足以说服你，接下了的事情就是第四部分，当然这部分还是最简单的，ai完全能写出，最多是我稍微调整一下

当完成到这里时已经花了一个半月时间了，我确实没太想起来为什么时间这么快，但是到了面对设备的问题了，我们当时我们只有两台树莓派，但是树莓派这东西性能确实一般，跑个网页还行，高强度持续跑人脸识别，怎么说呢，不好也没人愿意，这个时候，郑又发力了，不知道怎么搓出来了这个实验室上古服务器，成功装上了ubuntu server，当然不止于此，我之前注意到实验室有两个摄像头，当然昂，是著名的海康的摄像头，经过郑的奋斗，将这个摄像头重置了，这个摄像头完整得可以被使用了，我也加了一个脚本去获得这个这个摄像头的视频流，代替之前的小摄像头，这段话虽然说起来很短，但是实打实花了不少时间，之所以没能写出来多少，是因为这部分我基本没有参与，基本是郑搞的，郑在搞硬件这方面确实有东西，我有时候很难对搞硬件有大量的热情

完成这些就基本到了两个多月了，虽然时间很长吧，但是毕竟最后这一套是严格可以运行的东西，我觉得慢慢打磨确实有成果

虽然后续测试还是有问题的吧，为什么这么说呢，因为这个opencv加上这个摄像头抽风了，莫名其妙能卡住，就是这条链路直接卡死了，从下午4点卡到晚上七点，特别奇怪，但是我也没办法，所以我索性加了更强的安全措施，5秒死帧就直接断开重新连接

[https://github.com/lipcoder/pi-face](https://github.com/lipcoder/pi-face)这个就是项目了，有兴趣的话你也可以看看，因为我这个博客网站不算搭建好了吧，所以没加什么照片，我搭建好可以再给你看照片